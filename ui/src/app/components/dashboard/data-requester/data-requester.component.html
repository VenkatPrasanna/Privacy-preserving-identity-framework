<mat-sidenav-container>
  <mat-sidenav
    class="w-48 bg-[#1939ab] text-white rounded-lg p-4 text-center"
    mode="side"
    opened
  >
    <button mat-button class="menu-button">
      <mat-icon>person</mat-icon><span>Profile</span>
    </button>
    <button mat-button class="menu-button" *ngIf="dataRequester.approved">
      <mat-icon>remove_red_eye</mat-icon><span>Allowed data</span>
    </button>
    <button mat-button class="menu-button" *ngIf="dataRequester.approved">
      <mat-icon>create_new_folder</mat-icon><span>Request data</span>
    </button>
  </mat-sidenav>
  <mat-sidenav-content>
    <div
      class="flex flex-col ml-5 justify-start p-12 rounded-lg mat-elevation-z4 usercomponent"
    >
      <!-- Header information for the owner-->
      <div class="w-full pb-2 user-welcome-info">
        <p class="text-lg">Welcome: {{ dataRequester.requesterAddress }}</p>
        <p>
          Approved:
          <span
            class="text-pink-800 font-bold"
            [ngClass]="{ 'text-green-800': dataRequester.approved }"
            >{{ dataRequester.approved }}</span
          >
        </p>
      </div>
      <div class="mt-5">
        <mat-form-field appearance="standard">
          <mat-label>Filter</mat-label>
          <input
            matInput
            (keyup)="applyFilter($event)"
            placeholder="Search"
            #input
          />
        </mat-form-field>
        <table
          mat-table
          [dataSource]="dataSource"
          class="mat-elevation-z8 w-full"
        >
          <!-- Position Column -->
          <ng-container matColumnDef="dataid">
            <th mat-header-cell *matHeaderCellDef>Data id</th>
            <td mat-cell *matCellDef="let element">{{ element.dataid }}</td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="category">
            <th mat-header-cell *matHeaderCellDef>Category</th>
            <td mat-cell *matCellDef="let element">{{ element.category }}</td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element; let i = index">
              <button
                mat-raised-button
                class="text-white bg-purple-700 hover:bg-purple-800"
                (click)="checkAccess(element)"
              >
                Get key
              </button>
              <!-- <button
                mat-raised-button
                *ngIf="policyMatch"
                class="text-white bg-purple-700 hover:bg-purple-800"
                (click)="checkAccess(element)"
              >
                Get key
              </button> -->
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
              No data matching the filter "{{ input.value }}"
            </td>
          </tr>
        </table>
      </div>
      <!-- Section for Adding and updating datasets-->
      <div class="my-7">
        <div>
          <div class="mt-5">
            <mat-form-field appearance="standard">
              <mat-label>Filter</mat-label>
              <input
                matInput
                (keyup)="applyFilter($event)"
                placeholder="Search"
                #input
              />
            </mat-form-field>
            <table
              mat-table
              [dataSource]="dataSource"
              class="mat-elevation-z8 w-full"
            >
              <!-- Position Column -->
              <ng-container matColumnDef="dataid">
                <th mat-header-cell *matHeaderCellDef>Data id</th>
                <td mat-cell *matCellDef="let element">{{ element.dataid }}</td>
              </ng-container>

              <!-- Name Column -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Name</th>
                <td mat-cell *matCellDef="let element">{{ element.name }}</td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="category">
                <th mat-header-cell *matHeaderCellDef>Category</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.category }}
                </td>
              </ng-container>

              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>Actions</th>
                <td mat-cell *matCellDef="let element; let i = index">
                  <button
                    mat-raised-button
                    class="text-white bg-purple-700 hover:bg-purple-800"
                    (click)="decrypt(element)"
                  >
                    Decrypt
                  </button>
                  <!-- <button
                    mat-raised-button
                    *ngIf="policyMatch"
                    class="text-white bg-purple-700 hover:bg-purple-800"
                    (click)="checkAccess(element)"
                  >
                    Get key
                  </button> -->
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

              <!-- Row shown when there is no matching data. -->
              <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">
                  No data matching the filter "{{ input.value }}"
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <!-- Section to view and grant access to requests-->
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
